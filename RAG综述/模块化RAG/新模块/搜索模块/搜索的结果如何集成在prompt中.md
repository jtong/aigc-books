## 常见的集成方式

搜索模块检索到的内容需要以适当的格式集成到提示（prompt）中，以便大型语言模型（LLM）能够高效地利用这些信息生成答案。以下是常见的集成方式：

### 1. **直接嵌入法**

将检索到的文本片段直接嵌入到提示中。这种方法简单直接，适用于大多数情况。

```plaintext
用户查询: [用户的原始问题]

检索到的内容:
1. [检索到的片段1]
2. [检索到的片段2]
3. [检索到的片段3]

请基于上述内容生成回答。
```

### 2. **分段提示法**

将检索到的内容分段，并在每段前添加标记，以帮助模型理解每段的来源和内容。

```plaintext
用户查询: [用户的原始问题]

输入文档:
段落1: [检索到的片段1]
段落2: [检索到的片段2]
段落3: [检索到的片段3]

请基于上述输入生成回答。
```

### 3. **上下文整合法**

将检索到的内容整合为一个连贯的上下文段落，减少冗余和重复信息。

```plaintext
用户查询: [用户的原始问题]

相关信息: [整合后的连贯段落，包括所有检索到的重要信息]

请基于上述信息生成回答。
```

### 4. **问答对格式**

将检索到的信息转化为问答对的形式，帮助模型更好地理解和利用这些信息。

```plaintext
用户查询: [用户的原始问题]

相关问答:
Q1: [相关问题1]
A1: [检索到的内容1]

Q2: [相关问题2]
A2: [检索到的内容2]

Q3: [相关问题3]
A3: [检索到的内容3]

请基于上述问答生成回答。
```

### 5. **标签化内容**

为检索到的内容添加标签和注释，以明确每段内容的来源和重要性。

```plaintext
用户查询: [用户的原始问题]

[来源1]: [检索到的内容1]
[来源2]: [检索到的内容2]
[来源3]: [检索到的内容3]

请基于上述信息生成回答。
```

### 6. **摘要法**

将检索到的内容进行摘要，提取关键信息，然后嵌入到提示中。

```plaintext
用户查询: [用户的原始问题]

摘要信息: [对检索到的内容进行摘要后的关键信息]

请基于上述信息生成回答。
```

### 示例

假设用户查询是关于一个特定的法律条款，检索到的内容是多个相关的法律条文和解释：

```plaintext
用户查询: 请解释《合同法》第五条的内容。

检索到的内容:
1. 《合同法》第五条规定: 合同应当依法成立，具备法律效力。
2. 法律解释: 合同的成立必须符合法律规定的形式和程序。
3. 案例: 在某某案中，法院认定合同因未按法律程序签订而无效。

请基于上述内容生成回答。
```

通过这种方式，检索到的内容被有效地集成到提示中，使得大型语言模型能够利用这些信息产生准确和相关的回答。


## 格式优化

为了减少大型语言模型（LLM）对集成在提示（prompt）中的检索内容的误解，可以采用一些格式和结构上的策略来提高提示的清晰度和一致性。以下是一些可行的方法：

### 1. **明确的标签和注释**

通过在检索到的内容前添加明确的标签和注释，可以帮助模型识别每段内容的来源和作用。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

相关信息:
[法律条文]: 《合同法》第五条规定: 合同应当依法成立，具备法律效力。
[法律解释]: 合同的成立必须符合法律规定的形式和程序。
[案例]: 在某某案中，法院认定合同因未按法律程序签订而无效。

请基于上述内容生成回答。
```

### 2. **分段提示**

将不同类型的信息分段，以便模型可以逐段处理并理解每段内容的作用。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

法律条文:
《合同法》第五条规定: 合同应当依法成立，具备法律效力。

法律解释:
合同的成立必须符合法律规定的形式和程序。

案例:
在某某案中，法院认定合同因未按法律程序签订而无效。

请基于上述内容生成回答。
```

### 3. **问答对格式**

将检索到的信息转化为问答对的形式，帮助模型更好地理解信息的上下文和相关性。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

相关信息:
Q: 《合同法》第五条规定了什么？
A: 合同应当依法成立，具备法律效力。

Q: 合同的成立需要遵循什么？
A: 合同的成立必须符合法律规定的形式和程序。

Q: 有没有相关的案例？
A: 在某某案中，法院认定合同因未按法律程序签订而无效。

请基于上述问答生成回答。
```

### 4. **上下文整合**

将检索到的内容整合为一个连贯的上下文段落，减少冗余和重复信息。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

相关信息:
《合同法》第五条规定，合同应当依法成立，具备法律效力。法律解释指出，合同的成立必须符合法律规定的形式和程序。在某某案中，法院认定合同因未按法律程序签订而无效。

请基于上述信息生成回答。
```

### 5. **使用结构化格式**

使用表格或列表等结构化格式来清晰地呈现信息，帮助模型更好地理解和处理。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

| 类型       | 内容                                                                 |
|------------|----------------------------------------------------------------------|
| 法律条文   | 《合同法》第五条规定: 合同应当依法成立，具备法律效力。                |
| 法律解释   | 合同的成立必须符合法律规定的形式和程序。                             |
| 案例       | 在某某案中，法院认定合同因未按法律程序签订而无效。                   |

请基于上述内容生成回答。
```

### 6. **明确的指令**

在提示中给出明确的指令，告诉模型如何处理和使用信息。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

以下是相关信息，请使用它们生成一个综合的回答：
- 法律条文: 《合同法》第五条规定: 合同应当依法成立，具备法律效力。
- 法律解释: 合同的成立必须符合法律规定的形式和程序。
- 案例: 在某某案中，法院认定合同因未按法律程序签订而无效。

请基于上述信息生成回答。
```

### 7. **上下文压缩和选择**

在上下文过长的情况下，通过选择和压缩关键内容来减少模型处理的负担。

```plaintext
用户查询: 请解释《合同法》第五条的内容。

关键信息:
- 《合同法》第五条: 合同应当依法成立，具备法律效力。
- 解释: 合同的成立必须符合法律规定的形式和程序。
- 案例: 某某案中，法院认定合同因未按法律程序签订而无效。

请基于这些关键信息生成回答。
```

通过这些格式和结构上的调整，可以帮助LLM更好地理解和处理集成在提示中的检索内容，从而提高生成答案的准确性和相关性。

## 使用 Markdown 和 XML 进行格式优化

Markdown 和 XML 这两种格式都可以在集成检索内容时提供一定的帮助。它们各自有不同的特点和优势，具体使用哪种格式取决于您的具体需求和使用场景。

### 使用 Markdown

Markdown 是一种轻量级标记语言，简单且易读，适合在提示中组织和格式化文本内容。以下是一些使用 Markdown 的优点和示例：

#### 优点

- **简洁易读**：Markdown 语法简单，容易理解和编写。
- **格式清晰**：通过标题、列表、表格等格式，可以清晰地组织和呈现信息。
- **广泛支持**：许多编辑器和平台都支持 Markdown 格式，方便跨平台使用。

#### 示例

```markdown
### 用户查询
请解释《合同法》第五条的内容。

### 相关信息
#### 法律条文
《合同法》第五条规定: 合同应当依法成立，具备法律效力。

#### 法律解释
合同的成立必须符合法律规定的形式和程序。

#### 案例
在某某案中，法院认定合同因未按法律程序签订而无效。

### 生成指令
请基于上述内容生成回答。
```

### 使用 XML

XML（可扩展标记语言）是一种用于描述数据的标记语言，适合需要严格结构化数据的场景。以下是使用 XML 的优点和示例：

#### 优点

- **结构化数据**：XML 可以清晰地定义数据的结构和层次，适合复杂数据的组织和管理。
- **严格验证**：通过 DTD 或 XML Schema，可以对 XML 数据的格式和内容进行验证，确保数据的准确性和一致性。
- **广泛应用**：XML 是许多应用和系统之间数据交换的标准格式，具有良好的兼容性。

#### 示例

```xml
<query>
    <userQuery>请解释《合同法》第五条的内容。</userQuery>
    <relatedInfo>
        <law>
            <text>《合同法》第五条规定: 合同应当依法成立，具备法律效力。</text>
        </law>
        <explanation>
            <text>合同的成立必须符合法律规定的形式和程序。</text>
        </explanation>
        <case>
            <text>在某某案中，法院认定合同因未按法律程序签订而无效。</text>
        </case>
    </relatedInfo>
    <instruction>请基于上述内容生成回答。</instruction>
</query>
```

### 如何选择

- **简单和快速集成**：如果您的场景不需要严格的结构化数据，并且希望快速集成和展示信息，Markdown 是一个不错的选择。
- **复杂和结构化数据**：如果您的场景需要处理复杂的、结构化的数据，并且需要严格的数据格式验证，XML 会更适合。

### 结合使用

在某些情况下，您可以结合使用 Markdown 和 XML。例如，使用 XML 来存储和组织复杂的检索数据，然后在提示中使用 Markdown 格式化和展示这些数据。

#### 示例：结合使用

```markdown
### 用户查询
请解释《合同法》第五条的内容。

### 相关信息
```xml
<relatedInfo>
    <law>
        <text>《合同法》第五条规定: 合同应当依法成立，具备法律效力。</text>
    </law>
    <explanation>
        <text>合同的成立必须符合法律规定的形式和程序。</text>
    </explanation>
    <case>
        <text>在某某案中，法院认定合同因未按法律程序签订而无效。</text>
    </case>
</relatedInfo>
```

### 生成指令
请基于上述内容生成回答。
```

通过这种方式，您可以利用 XML 的结构化优势，同时享受 Markdown 的简洁和可读性。

